{% extends "base.html" %}
{% block title %}Crear Pedido - CafeterÃ­a{% endblock %}

{% block content %}
<div class="container my-5">

    <h1 class="text-center mb-4">ğŸ“ Registrar Nuevo Pedido</h1>

    <div class="form-box-dark mx-auto p-4 shadow-lg rounded-4" style="max-width: 650px;">

        <form action="/crear_pedido" method="POST">

            <!-- ID Pedido -->
            <div class="mb-3">
                <label for="id_pedido" class="form-label">ğŸ†” ID Pedido</label>
                <input type="text" id="id_pedido" name="id_pedido"
                    class="form-control" required placeholder="Ej: PE45">
            </div>

            <!-- Cliente -->
            <div class="mb-3">
                <label for="id_cliente" class="form-label">ğŸ‘¤ Cliente</label>
                <select id="id_cliente" name="id_cliente" class="form-select" required>
                    <option value="">-- SeleccionÃ¡ un cliente --</option>
                    {% for c in clientes %}
                        <option value="{{ c[0] }}">{{ c[0] }} - {{ c[1] }} {{ c[2] }}</option>
                    {% endfor %}
                </select>
            </div>

            <!-- Empleado -->
            <div class="mb-3">
                <label for="id_empleado" class="form-label">ğŸ§‘â€ğŸ³ Empleado</label>
                <select id="id_empleado" name="id_empleado" class="form-select" required>
                    <option value="">-- SeleccionÃ¡ un empleado --</option>
                    {% for e in empleados %}
                        <option value="{{ e[0] }}">{{ e[0] }} - {{ e[1] }}</option>
                    {% endfor %}
                </select>
            </div>

            <!-- Fecha (auto) -->
            <div class="mb-3">
                <label for="fecha" class="form-label">ğŸ“… Fecha</label>
                <input type="date" id="fecha" name="fecha" class="form-control" 
                    required value="{{ fecha_hoy }}">
            </div>

            <!-- Estado: siempre pendiente -->
            <input type="hidden" name="estado" value="Pendiente">

            <p class="small text-muted">
                ğŸ“Œ *El pedido se crea automÃ¡ticamente como <b>Pendiente</b>. 
                Luego podrÃ¡ cambiarse cuando se prepare, entregue o cancele.*
            </p>

            <div class="d-grid mt-4">
                <button type="submit" class="btn btn-success">âœ” Crear Pedido</button>
            </div>

            <p class="text-center mt-4">
                <a href="{{ url_for('listado') }}" 
                class="btn btn-outline-light text-dark fw-semibold px-4 py-2 rounded-3">
                    â† Volver al listado
                </a>
            </p>

        </form>
    </div>

</div>
{% endblock %}

